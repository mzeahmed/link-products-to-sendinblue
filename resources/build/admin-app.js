(()=>{"use strict";const t={init:function(){const t=document.querySelector("#lpts_user_attributes_fields"),e=document.getElementById("userAttributesAdd"),n=document.getElementById("userAttributesDel");t&&t.childElementCount<2&&(n.disabled=!0),e&&e.addEventListener("click",(()=>{this._addFields(t,n)})),n&&n.addEventListener("click",(()=>{this._removeFields(t,n)}))},_addFields:function(t,e){const n=document.querySelector(".attributes_match_row");if(!n)return;const o=n.cloneNode(!0);t.appendChild(o),e.disabled=!1},_removeFields:function(t,e){if(t.childElementCount<2)return;const n=t.lastElementChild;n&&t.removeChild(n),t.childElementCount<2&&(e.disabled=!0)}},e=window.wp.i18n,n={init:function(){const t=document.getElementById("sendinblue_data_panel"),e=document.getElementById("add_lpts_list_row"),n=document.getElementById("lpts_list_rows");if(!e||!n||!t)return;let o=[];try{const e=t.dataset.lists;o=JSON.parse(e)}catch(t){return void console.error("Invalid JSON in data-lists:",t)}this._addList(e,n,o),this._removeList(n)},_addList:function(t,n,o){t.addEventListener("click",(()=>{const t=document.createElement("tr");console.log("addList",o);const i=Object.entries(o).map((([t,e])=>`<option value="${t}">${e}</option>`)).join("");t.innerHTML=`\n        <td>\n          <select name="_selec_list[][list_id]" class="wc-enhanced-select">\n            ${i}\n          </select>\n        </td>\n        \n        <td>\n          <select name="_selec_list[][condition]">\n            <option value="always">${(0,e.__)("Always","link-products-to-sendinblue")}</option>\n            <option value="order_total_gt">${(0,e.__)("Order Total >","link-products-to-sendinblue")}</option>\n            <option value="order_total_eq">${(0,e.__)("Order Total =","link-products-to-sendinblue")}</option>\n            <option value="user_role">${(0,e.__)("User Role","link-products-to-sendinblue")}</option>\n          </select>\n        </td>\n        \n        <td><input type="text" name="_selec_list[][param]" /></td>\n        <td><button type="button" class="button remove-row">${(0,e.__)("Remove","link-products-to-sendinblue")}</button></td>\n      `,n.appendChild(t)}))},_removeList:function(t){t.addEventListener("click",(t=>{const e=t.target;if(e.classList.contains("remove-row")){const t=e.closest("tr");t&&t.remove()}}))}};document.addEventListener("DOMContentLoaded",(()=>{t.init(),n.init()}))})();